<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat Application</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
<form id="form" action="">
    <div class="flex flex-col h-screen bg-gray-100 p-4">
        <div class="flex-1 p-4 bg-white overflow-y-auto" id="chat-content">
            <!-- Chat messages will go here -->
            <ul id="messages"></ul>
        </div>
        <div class="mt-4">
            <input id="user" autocomplete="off" placeholder="Your name" required/>
        </div>
        <div class="mt-4">
            <input type="text" id="m" class="w-full p-2 border rounded-lg shadow-sm" placeholder="Type a message... ðŸ˜Š"/>
        </div>
    </div>
    <button>Send</button>
</form>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io();

    function appendMessage(message) {
        var item = document.createElement('li');
        item.textContent = message;
        document.getElementById('messages').appendChild(item);
    }

    socket.on('init', function (messages) {
        messages.forEach(msg => {
            appendMessage(msg.user + ': ' + msg.message);
        });
    });

    socket.on('chat message', function (msg) {
        appendMessage(msg.user + ': ' + msg.message);
    });

    document.getElementById('form').addEventListener('submit', function (e) {
        e.preventDefault();
        var user = document.getElementById('user').value;
        var message = document.getElementById('m').value;
        socket.emit('chat message', {user: user, message: message});
        document.getElementById('m').value = '';
    });
</script>
</body>
</html>